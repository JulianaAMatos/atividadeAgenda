<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <script>

       let arrNum = [];
        //CRIAR SISTEMA DE GERENCIAMENTO DE USUARIO
    function Agenda(){
        return  parseInt(prompt(`
            *******MENU*******
            [1]- CADASTRAR NÚMERO
            [2]- VISUALIZAR NÚMEROS
            [3]- ATUALIZAR NÚMEROS
            [4]- DELETAR NÚMERO
            [5]- SAIR DO PROGRAMA
            `))
        };


        //MÉTODO DE CADASTRO DE USUÁRIO=>(VERBO: HTTP:POST)
        const addCont = ()=> {
        let nomeUser = prompt("Informe o nome do contado: ")
        do {
        numUser= Number(window.prompt('Digite o número que deseja adicionar: '))
        if(isNaN(numUser)){
         window.alert('Você precisa digitar um número')}
        }while (isNaN(numUser)); 
        const emailUser= prompt("Informe o email:")



        if(!nomeUser||!numUser && !nomeUser || !emailUser && !numUser || !emailUser){
          
            alert("Os campos são obrigatórios!")

        }

        let dtUser= new Date()
        let data= (`${dtUser.getDate()}/${dtUser.getMonth()+ 1}/${dtUser.getFullYear()}`)
        let horaDoDia= (`${dtUser.getHours()}:${dtUser.getMinutes()}:${dtUser.getSeconds()}`)
           
        
        arrNum.push({nomeUser,numUser,emailUser,data, horaDoDia})
        
        console.log(arrNum)
        
    }
    
    const visCont =() => {
    let visCont= "";

        arrNum.forEach((dataUser) => {
        visCont += 
        `Nome: ${dataUser.nomeUser}, Tel: ${dataUser.numUser}, Email : ${dataUser.emailUser} Data: ${dataUser.data} Horário: ${dataUser.horaDoDia}`
    
        });

        console.log(visCont)
        
        alert("*****Agenda de Contatos*****" + visCont  )
     };
        visCont()

        function EditNumInfor() {
        const findNum = prompt("Informe o número que você deseja editar: ");
        const numeroEncontrado = arrNum.find(
          (num) => num.numUser === findNum
        );

        if (!numeroEncontrado) {
          alert("O número não foi encontrado!");

          return;
        }

        const novoNumero = prompt("Informe o novo número: ");
        const novoNomeUsuario = prompt("Informe o nome do usuário: ");

        //  condicao      retorno se verdadeiro
        novoNumero ? (numeroEncontrado.numUser = novoNumero) : null;

        if (novoNomeUsuario) {
          numeroEncontrado.nomeUser = novoNomeUsuario;
        }

        alert("O número foi atualizado com sucesso!");
      }

    //Método para Deletar => Verbo HTTP (DELETE)
     function DeletarNum(){
        const numUser= prompt("Informe o número que deseja deletar: ")
        const indiceDelete= arrNum.findIndex(num => num.numUser === numeroDelete)

        const confirmacao = window.confirm(`Você deseja mesmo excluir esse número da agenda?${numeroDelete}`)
        if (confirmacao) {
            arrNum.splice(indiceDelete, 1)
        }
        alert("Número deletado com sucesso!")
     }


     let opcaoUser = true
     while (opcaoUser){
        
     switch (Agenda()) {
        case 1:
            addCont();
            break;
        case 2:
            visCont();
            break;
        case 3:
            EditNumInfor();
            break;
        case 4: 
            DeletarNum() 
            break;
        case 5: 
           alert(`Saindo da Agenda até logo `)
        default:
            opcaoUser= false
            alert('Opção inválida! Tente novamente')
            break;
     }
    
     }
      

    </script>
</body>
</html>